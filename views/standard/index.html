<script>
   var App = {
      socketToken: "<%= socketToken %>",
      user: "<%= user %>",
      debug: <%= debug %>
   };

   require(['pullManager', 'jquery'], function(_manager, $) {
      App.debugStart = function debugStart() {
         App.debug = true;
         _manager.trigger();
      };

      // Color switcher
      $(document).ready(function() {
         var cscookie = "";
         document.cookie.split(';').forEach(function(currentValue) {
            var elem = currentValue.split('=');
            if (elem[0] == "pulldasher-colorscheme") {
               cscookie = elem[1];
            }
         });

         $('#theme-selector > i').on('click', function() {
            if ($(this).hasClass('active')) {
               return;
            }

            var colorscheme = $(this).data('css');
            $('head .stylesheet').remove();
            $('head').append('<link class="stylesheet" rel="stylesheet" type="text/css" href="css/themes/' + colorscheme + '.css">');
            document.cookie = ("pulldasher-colorscheme=" + colorscheme + ";");

            $("i[data-css]").removeClass('active');
            $(this).addClass('active');

            if (colorscheme == 'night_theme') {
               $('.fa-check-circle').removeClass('fa-check-circle').addClass('fa-check');
            } else {
               $('.fa-check').removeClass('fa-check').addClass('fa-check-circle');
            }
         });

         var colorscheme = cscookie ? cscookie : 'day_theme';
         if (colorscheme != 'day_theme') {
            $('i[data-css="' + colorscheme + '"]').click();
         }

         $('i[data-css="' + colorscheme + '"]').addClass('active');
      });
   });
</script>

<nav class="navbar navbar-default" role="navigation">
   <p class="navbar-brand">
      <span class="brand-highlight">Pull</span>dasher
   </p>
   <div class="container-fluid">
      <div class="navbar-header">
         <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
         </button>
      </div>

      <div id="navbar" class="collapse navbar-collapse">
         <span id="restore-buttons"></span>
         <span id="global-indicators"></span>
         <div class="navbar-text navbar-right" id="theme-selector">
            Mode:
            <i data-css="day_theme" class="fa fa-sun-o"></i>
            <i data-css="night_theme" class="fa fa-moon-o"></i>
         </div>
         <span id="debug-indicators" class="navbar-right"></span>
      </div>
   </div>
</nav>

<div id="pulls" class="container">
   <div class="row">
      <div class="col-md-6">
         <div class="well leaderboard cr_leaderboard">
         </div>
      </div>
      <div class="col-md-6">
         <div class="well leaderboard qa_leaderboard">
         </div>
      </div>
   </div>
   <div class="row">
      <div id="ciBlocked-container" class="col-sm-6 col-md-4">
      </div>
      <div id="deployBlockPulls-container" class="col-sm-6 col-md-4">
      </div>
      <div id="readyPulls-container" class="col-sm-6 col-md-4">
      </div>
   </div>
   <div class="row">
      <div id="blockPulls-container" class="col-sm-6 col-md-4">
      </div>
      <div id="crPulls-container" class="col-sm-6 col-md-4">
      </div>
      <div id="qaPulls-container" class="col-sm-6 col-md-4">
      </div>
   </div>
</div>
<textarea id="branch_name_clipboard">
</textarea>
